---
layout: default
menu_index: 4
---

<div class="box">
    <div class="tag">【scrapy】</div><br>
    <div class="tag">标签： </div>
    <div class="tag">爬虫框架</div>
    <div class="tag">结构化爬取</div>
  
    <div class="shadow_box">
        <pre>前边介绍 Rqeusts 库已经能应对大部分爬虫工作，但是它是基于页面及的爬虫库，而 Scrapy 是一个重量级的爬虫框架，它提供了一整套工具：包含对页面的爬取，爬取规则的制定，数据的提取，入库等。</pre>
    </div>

    <!-- Requests 和 Scrapy 比较表格 -->
    <div class="shadow_box">Requests 和 Scrapy 比较如下：</div>
    <div class="dark_bg">
        <table class="scrapy_table" cellspacing="0" cellpadding="0">
            <tr class="table_header">
                <td>Requests</td>
                <td>Scrapy</td>
            </tr>
            <tr>
                <td>页面及爬虫</td>
                <td>网站及爬虫</td>
            </tr>
            <tr>
                <td>功能库</td>
                <td>框架</td>
            </tr>
            <tr>
                <td>并发性考虑不足，性能较差</td>
                <td>并发性好，性能较高</td>
            </tr>
            <tr>
                <td>重点在于页面下载</td>
                <td>重点在于爬虫结构</td>
            </tr>
            <tr>
                <td>定制灵活</td>
                <td>一般定制灵活，深度定制困难</td>
            </tr>
            <tr>
                <td>上手十分简单</td>
                <td>入门少难</td>
            </tr>
        </table>
    </div>

    <!-- Scrapy 架构 -->
    <div class="shadow_box">Scrapy 架构：</div>
    <div class="dark_bg">
        <img src="/Resource/Images/spider/scrapy.jpg" />
    </div>

    <!-- Scrapy 运行流程 -->
    <div class="shadow_box">Scrapy 运行流程：</div>
    {% highlight shell %}
1.引擎向 spiders 要链接（url）
2.引擎将要爬取的链接（url）给调度器
3.调度器将链接（url）生成请求对象（Request）放入到指定的队列中
4.引擎从队列中取出一个请求（Request）交给下载器处理
5.下载器发送请求（Request）获取互联网数据
6.下载器将数据（Response）返回给引擎
7.引擎将数据（Response）交给spiders
8.spiders 通过 xpath 等解析该数据（Response）得到实体（Item）或链接（url）
9.spiders 将解析后实体（Item）或链接（url）回给引擎
10.引擎判断数据（如果是实体（Item）交给管道处理，如果是链接（url）交给调度器
    {% endhighlight %}

    <!-- Scrapy 使用流程 -->
    <div class="shadow_box">Scrapy 使用流程：</div>
    {% highlight shell %}
scrapy startproject <project_name>
cd <project_name>
scrapy genspider <spider_name> <domain>
scrapy crawl <spider_name>
    {% endhighlight %}

</div>