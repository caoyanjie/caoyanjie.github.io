---
layout: default
menu_index: 5
---

<div class="box">
  <div class="code">
    <p>【装饰器模式】</p>
    <br />

    <p>1. C++版</p>

{% highlight c++ %}

  #include <iostream>
  #include <string>

  // 形状
  struct Shape
  {
      virtual std::string str() = 0;
  };

  // 圆
  struct Circle : Shape
  {
      // 重载基类虚函数
      std::string str() override
      {
          return std::string("圆的半径为：") + std::to_string(m_radius);
      }

  private:
      float m_radius = 10.0f;
  };

  // 形状颜色
  struct ColorShape : Shape
  {
      ColorShape(std::string color, Shape* shape)
      {
          m_color = color;
          m_shape = shape;
      }

      // 重载基类虚函数
      std::string str() override
      {
          return m_shape->str() + std::string(" 颜色为：") + m_color;
      }

  private:
      std::string    m_color;
      Shape*         m_shape;
  };

  int main()
  {
      Circle c;
      ColorShape cc("红色", &c);
      std::cout << cc.str() << std::endl;   // 结果为：
  }

{% endhighlight %}

    <p>2. Python版</p>

{% highlight python %}
  # 加粗
  def makebold(fn):
      def wrapped():
          return "<b>" + fn() + "</b>"
      return wrapped

  # 加斜
  def makeitalic(fn):
      def wrapped():
          return "<i>" + fn() + "</i>"
      return wrapped

  # 加斜再加粗
  @makebold
  @makeitalic
  def hello():
      return "hello world"

  print(hello())   # 结果为： <b><i>hello world</i></b>
{% endhighlight %}

  </div>
</div>